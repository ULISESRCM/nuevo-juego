const canvas=document.getElementById('canvas');const ctx=canvas.getContext('2d');const scale=20;const rows=canvas.height/scale;const cols=canvas.width/scale;let snake;let fruit;let gameInterval;let speed=150;let paused=false;function init(){snake=[{x:Math.floor(cols/2),y:Math.floor(rows/2)}];snake.dx=1;snake.dy=0;placeFruit();document.getElementById('score').textContent='Puntaje: 0'}function placeFruit(){fruit={x:Math.floor(Math.random()*cols),y:Math.floor(Math.random()*rows)}}function drawCell(x,y,color){ctx.fillStyle=color;ctx.fillRect(x*scale,y*scale,scale,scale)}function update(){if(paused)return;const head={x:snake[0].x+snake.dx,y:snake[0].y+snake.dy}; // wrap around
head.x=(head.x+cols)%cols;head.y=(head.y+rows)%rows; // check collision with self
for(let i=0;i<snake.length;i++){if(snake[i].x===head.x && snake[i].y===head.y){clearInterval(gameInterval);alert('Game Over\nPuntaje: '+(snake.length-1));return}}snake.unshift(head); // eat fruit
if(head.x===fruit.x && head.y===fruit.y){placeFruit();document.getElementById('score').textContent='Puntaje: '+(snake.length-1)}else{snake.pop()}draw()}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height); // fruit
drawCell(fruit.x,fruit.y,'#ef4444'); // snake
for(let i=0;i<snake.length;i++){drawCell(snake[i].x,snake[i].y,i===0?'#0ea5a4':'#38bdf8')}}window.addEventListener('keydown',e=>{const key=e.key;if((key==='ArrowUp'||key==='w')&&snake.dy===0){snake.dx=0;snake.dy=-1}if((key==='ArrowDown'||key==='s')&&snake.dy===0){snake.dx=0;snake.dy=1}if((key==='ArrowLeft'||key==='a')&&snake.dx===0){snake.dx=-1;snake.dy=0}if((key==='ArrowRight'||key==='d')&&snake.dx===0){snake.dx=1;snake.dy=0}})document.getElementById('start').addEventListener('click',()=>{if(gameInterval){clearInterval(gameInterval)}paused=false;gameInterval=setInterval(update,speed)})document.getElementById('pause').addEventListener('click',()=>{paused=!paused})init();draw();